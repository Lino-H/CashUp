# CashUpäº¤æ˜“å¼•æ“

CashUpäº¤æ˜“å¼•æ“æ˜¯ä¸€ä¸ªä¸“ä¸šçš„é‡åŒ–äº¤æ˜“ç³»ç»Ÿæ ¸å¿ƒç»„ä»¶ï¼Œæä¾›å®Œæ•´çš„äº¤æ˜“æ‰§è¡Œã€ç­–ç•¥ç®¡ç†å’Œé£é™©æ§åˆ¶åŠŸèƒ½ã€‚

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

### ğŸ”— æ ¸å¿ƒåŠŸèƒ½
- **å¤šäº¤æ˜“æ‰€æ”¯æŒ**: é›†æˆGate.ioã€Binanceç­‰ä¸»æµäº¤æ˜“æ‰€API
- **ç­–ç•¥ç®¡ç†**: æ”¯æŒç½‘æ ¼äº¤æ˜“ã€è¶‹åŠ¿è·Ÿè¸ªã€å¥—åˆ©ç­‰å¤šç§äº¤æ˜“ç­–ç•¥
- **å®æ—¶äº¤æ˜“**: æ”¯æŒç°è´§å’Œæ°¸ç»­åˆçº¦çš„å®æ—¶äº¤æ˜“
- **é£é™©æ§åˆ¶**: å†…ç½®æ­¢æŸã€æ­¢ç›ˆã€ä»“ä½ç®¡ç†ç­‰åŠŸèƒ½
- **WebSocketé›†æˆ**: å®æ—¶å¸‚åœºæ•°æ®æ¨é€å’Œè®¢å•çŠ¶æ€æ›´æ–°

### ğŸ› ï¸ æŠ€æœ¯ç‰¹æ€§
- **å¼‚æ­¥æ¶æ„**: åŸºäºFastAPIå’Œasyncioçš„é«˜æ€§èƒ½å¼‚æ­¥æ¶æ„
- **æ¨¡å—åŒ–è®¾è®¡**: æ”¯æŒæ’ä»¶åŒ–æ‰©å±•å’Œå¾®æœåŠ¡éƒ¨ç½²
- **é…ç½®ç®¡ç†**: çµæ´»çš„é…ç½®ç®¡ç†ï¼Œæ”¯æŒç¯å¢ƒå˜é‡å’Œæ•°æ®åº“é…ç½®
- **APIå®Œæ•´æ€§**: RESTful APIè®¾è®¡ï¼Œæ”¯æŒæ‰€æœ‰å¸¸ç”¨äº¤æ˜“æ“ä½œ
- **ç›‘æ§æ”¯æŒ**: å†…ç½®å¥åº·æ£€æŸ¥å’Œæ€§èƒ½ç›‘æ§

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.12+
- Node.js 18+ (å¯é€‰ï¼Œç”¨äºå‰ç«¯)
- Docker & Docker Compose (å¯é€‰)
- UV (PythonåŒ…ç®¡ç†å™¨)

### å®‰è£…ä¾èµ–
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
uv venv cashup
source cashup/bin/activate  # Linux/Mac
# cashup\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
uv pip install -r requirements.txt
```

### é…ç½®è®¾ç½®
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano .env
```

### åˆå§‹åŒ–æ•°æ®åº“
```bash
# è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
python scripts/init_database_config.py

# æˆ–è€…ä½¿ç”¨éƒ¨ç½²è„šæœ¬
make migrate
```

### å¯åŠ¨äº¤æ˜“å¼•æ“
```bash
# å¼€å‘æ¨¡å¼
uvicorn main:app --reload --host 0.0.0.0 --port 8002

# ç”Ÿäº§æ¨¡å¼
uvicorn main:app --host 0.0.0.0 --port 8002
```

## ğŸ“– APIæ–‡æ¡£

### ç­–ç•¥ç®¡ç†API

#### è·å–æ‰€æœ‰ç­–ç•¥çŠ¶æ€
```bash
GET /api/v1/strategies/status
```

#### å¯åŠ¨ç­–ç•¥
```bash
POST /api/v1/strategies/{strategy_name}/start
```

#### åœæ­¢ç­–ç•¥
```bash
POST /api/v1/strategies/{strategy_name}/stop
```

#### è·å–ç­–ç•¥ä¿¡å·
```bash
GET /api/v1/strategies/{strategy_name}/signals?limit=10
```

#### è·å–ç­–ç•¥æŒä»“
```bash
GET /api/v1/strategies/{strategy_name}/positions
```

### äº¤æ˜“ç®¡ç†API

#### è·å–è®¢å•åˆ—è¡¨
```bash
GET /api/v1/orders
```

#### åˆ›å»ºè®¢å•
```bash
POST /api/v1/orders
{
    "symbol": "BTC/USDT",
    "side": "buy",
    "type": "limit",
    "quantity": 0.1,
    "price": 30000.0
}
```

#### è·å–æŒä»“åˆ—è¡¨
```bash
GET /api/v1/positions
```

#### è·å–è´¦æˆ·ä½™é¢
```bash
GET /api/v1/balances
```

#### è·å–è´¦æˆ·ä¿¡æ¯
```bash
GET /api/v1/account/info
```

### é«˜çº§äº¤æ˜“API

#### è·å–äº¤æ˜“å†å²
```bash
GET /trading/orders/history?limit=100&status=filled
```

#### è·å–è´¦æˆ·æ‘˜è¦
```bash
GET /trading/account/summary
```

#### è·å–å¯ç”¨äº¤æ˜“å¯¹
```bash
GET /trading/symbols
```

#### è·å–äº¤æ˜“è´¹ç‡
```bash
GET /trading/fees
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
trading-engine/
â”œâ”€â”€ main.py                    # ä¸»åº”ç”¨å…¥å£
â”œâ”€â”€ requirements.txt           # Pythonä¾èµ–
â”œâ”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ test_trading_engine.py     # å®Œæ•´åŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ start_test.py             # å¯åŠ¨æµ‹è¯•è„šæœ¬
â”œâ”€â”€ test_api.py               # APIæµ‹è¯•è„šæœ¬
â”œâ”€â”€ api/                      # APIè·¯ç”±
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ strategies.py     # ç­–ç•¥ç®¡ç†API
â”‚   â”‚   â””â”€â”€ trading.py       # äº¤æ˜“ç®¡ç†API
â”œâ”€â”€ exchanges/                # äº¤æ˜“æ‰€é›†æˆ
â”‚   â”œâ”€â”€ base.py              # åŸºç¡€äº¤æ˜“æ‰€ç±»
â”‚   â”œâ”€â”€ gateio.py            # Gate.ioå®ç°
â”‚   â”œâ”€â”€ gateio_ws.py         # WebSocketå®ç°
â”‚   â””â”€â”€ binance.py           # Binanceå®ç°
â”œâ”€â”€ simulator/                # æ¨¡æ‹Ÿäº¤æ˜“
â”‚   â”œâ”€â”€ trading_simulator.py # äº¤æ˜“æ¨¡æ‹Ÿå™¨
â”‚   â””â”€â”€ market_simulator.py  # å¸‚åœºæ¨¡æ‹Ÿå™¨
â”œâ”€â”€ strategies/              # äº¤æ˜“ç­–ç•¥
â”‚   â”œâ”€â”€ base_strategy.py     # ç­–ç•¥åŸºç±»
â”‚   â”œâ”€â”€ strategy_manager.py  # ç­–ç•¥ç®¡ç†å™¨
â”‚   â”œâ”€â”€ grid_strategy.py     # ç½‘æ ¼ç­–ç•¥
â”‚   â”œâ”€â”€ trend_strategy.py    # è¶‹åŠ¿ç­–ç•¥
â”‚   â””â”€â”€ arbitrage_strategy.py # å¥—åˆ©ç­–ç•¥
â”œâ”€â”€ services/                # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ config_service.py    # é…ç½®ç®¡ç†æœåŠ¡
â”‚   â””â”€â”€ api_service.py       # APIæœåŠ¡
â””â”€â”€ scripts/                  # å·¥å…·è„šæœ¬
    â”œâ”€â”€ init_database_config.py # æ•°æ®åº“åˆå§‹åŒ–
    â””â”€â”€ test_runner.py       # æµ‹è¯•è¿è¡Œå™¨
```

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
```bash
# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://user:password@localhost:5432/cashup
REDIS_URL=redis://localhost:6379

# APIé…ç½®
ALLOWED_ORIGINS=http://localhost,http://localhost:3000
API_RATE_LIMIT=100

# äº¤æ˜“æ‰€é…ç½®
GATE_IO_API_KEY=your_api_key
GATE_IO_SECRET_KEY=your_secret_key
BINANCE_API_KEY=your_api_key
BINANCE_SECRET_KEY=your_secret_key

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
LOG_FILE_ENABLED=true
```

### æ•°æ®åº“é…ç½®
äº¤æ˜“å¼•æ“æ”¯æŒä»¥ä¸‹é…ç½®ï¼š

- **äº¤æ˜“æ‰€é…ç½®**: å­˜å‚¨å„äº¤æ˜“æ‰€çš„APIå¯†é’¥å’Œè®¾ç½®
- **äº¤æ˜“é…ç½®**: æ æ†ã€ä»“ä½é™åˆ¶ã€é£é™©å‚æ•°ç­‰
- **ç­–ç•¥é…ç½®**: ç­–ç•¥å‚æ•°ã€æ­¢æŸæ­¢ç›ˆè®¾ç½®ç­‰
- **ç³»ç»Ÿé…ç½®**: æ—¥å¿—ã€ç›‘æ§ã€ç¼“å­˜ç­‰è®¾ç½®

## ğŸ§ª æµ‹è¯•

### è¿è¡ŒåŠŸèƒ½æµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python test_trading_engine.py

# è¿è¡Œå¯åŠ¨æµ‹è¯•
python start_test.py

# è¿è¡ŒAPIæµ‹è¯•
python test_api.py
```

### æµ‹è¯•è¦†ç›–
- âœ… ä¾èµ–é¡¹å¯¼å…¥æµ‹è¯•
- âœ… æ¨¡å—å¯¼å…¥æµ‹è¯•
- âœ… ç­–ç•¥ç®¡ç†å™¨æµ‹è¯•
- âœ… åŸºç¡€ç­–ç•¥æµ‹è¯•
- âœ… äº¤æ˜“æ‰€ç®¡ç†å™¨æµ‹è¯•
- âœ… é…ç½®æœåŠ¡æµ‹è¯•
- âœ… ä¸»åº”ç”¨æµ‹è¯•
- âœ… APIæ¥å£æµ‹è¯•

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°äº¤æ˜“æ‰€
1. åœ¨`exchanges/`ç›®å½•åˆ›å»ºæ–°çš„äº¤æ˜“æ‰€å®ç°
2. ç»§æ‰¿`ExchangeBase`åŸºç±»
3. å®ç°å¿…è¦çš„APIæ–¹æ³•
4. åœ¨äº¤æ˜“æ‰€ç®¡ç†å™¨ä¸­æ³¨å†Œ

### æ·»åŠ æ–°ç­–ç•¥
1. åœ¨`strategies/`ç›®å½•åˆ›å»ºæ–°çš„ç­–ç•¥ç±»
2. ç»§æ‰¿`BaseStrategy`åŸºç±»
3. å®ç°`analyze_market`æ–¹æ³•
4. åœ¨ç­–ç•¥ç®¡ç†å™¨ä¸­æ³¨å†Œ

### æ‰©å±•API
1. åœ¨`api/routes/`ç›®å½•åˆ›å»ºæ–°çš„è·¯ç”±æ–‡ä»¶
2. åœ¨`main.py`ä¸­æ³¨å†Œè·¯ç”±
3. ç¼–å†™APIæ–‡æ¡£
4. æ·»åŠ æµ‹è¯•ç”¨ä¾‹

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **ä¾èµ–å®‰è£…å¤±è´¥**: ç¡®ä¿ä½¿ç”¨Python 3.12+å’ŒUVåŒ…ç®¡ç†å™¨
2. **æ•°æ®åº“è¿æ¥å¤±è´¥**: æ£€æŸ¥æ•°æ®åº“é…ç½®å’Œç½‘ç»œè¿æ¥
3. **APIè°ƒç”¨å¤±è´¥**: æ£€æŸ¥APIå¯†é’¥å’Œç½‘ç»œæƒé™
4. **ç­–ç•¥è¿è¡Œå¼‚å¸¸**: æ£€æŸ¥ç­–ç•¥å‚æ•°å’Œæ—¥å¿—è¾“å‡º

### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f logs/trading_engine.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f logs/error.log
```

### æ€§èƒ½ä¼˜åŒ–
1. ä½¿ç”¨Redisç¼“å­˜é…ç½®å’Œæ•°æ®
2. ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
3. åˆç†è®¾ç½®å¹¶å‘é™åˆ¶
4. ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ

## ğŸ“ˆ ç›‘æ§æŒ‡æ ‡

### ç³»ç»ŸæŒ‡æ ‡
- CPUä½¿ç”¨ç‡
- å†…å­˜ä½¿ç”¨é‡
- ç½‘ç»œå¸¦å®½
- ç£ç›˜IO

### äº¤æ˜“æŒ‡æ ‡
- è®¢å•æ‰§è¡Œå»¶è¿Ÿ
- æˆäº¤ç‡
- æ»‘ç‚¹
- æ‰‹ç»­è´¹æ”¯å‡º

### ç­–ç•¥æŒ‡æ ‡
- ç­–ç•¥æ”¶ç›Šç‡
- æœ€å¤§å›æ’¤
- å¤æ™®æ¯”ç‡
- äº¤æ˜“é¢‘ç‡

## ğŸ”’ å®‰å…¨è¯´æ˜

### å®‰å…¨æœ€ä½³å®è·µ
1. APIå¯†é’¥å®‰å…¨å­˜å‚¨ï¼Œé¿å…ç¡¬ç¼–ç 
2. å®šæœŸè½®æ¢APIå¯†é’¥
3. å®æ–½IPç™½åå•é™åˆ¶
4. å¯ç”¨APIè®¿é—®æ—¥å¿—
5. ç›‘æ§å¼‚å¸¸äº¤æ˜“è¡Œä¸º

### æ•°æ®ä¿æŠ¤
1. æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
2. å®šæœŸå¤‡ä»½æ•°æ®
3. è®¿é—®æƒé™æ§åˆ¶
4. å®‰å…¨å®¡è®¡æ—¥å¿—

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥é¡¹ç›®çš„GitHub Issues
3. è¿è¡Œæµ‹è¯•è„šæœ¬è¯Šæ–­é—®é¢˜
4. è”ç³»å¼€å‘å›¢é˜Ÿè·å–æŠ€æœ¯æ”¯æŒ

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦è§LICENSEæ–‡ä»¶ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Pull Requestå’ŒIssueæ¥æ”¹è¿›é¡¹ç›®ã€‚è¯·ç¡®ä¿ï¼š

1. éµå¾ªä»£ç è§„èŒƒ
2. æ·»åŠ é€‚å½“çš„æµ‹è¯•
3. æ›´æ–°ç›¸å…³æ–‡æ¡£
4. ç»è¿‡å……åˆ†æµ‹è¯•
# CashUp订单服务环境配置文件示例
# 复制此文件为 .env 并根据实际环境修改配置值

# ================================
# 应用基础配置
# ================================
APP_NAME=CashUp Order Service
APP_VERSION=1.0.0
DEBUG=true
PORT=8002

# ================================
# 数据库配置
# ================================
# PostgreSQL数据库连接URL
DATABASE_URL=postgresql+asyncpg://cashup:cashup123@localhost:5432/cashup_orders

# 数据库连接池配置
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# ================================
# Redis配置
# ================================
# Redis连接URL
REDIS_URL=redis://localhost:6379/2

# Redis连接池配置
REDIS_POOL_SIZE=20
REDIS_POOL_TIMEOUT=10

# ================================
# JWT认证配置
# ================================
# JWT密钥（生产环境请使用强密钥）
JWT_SECRET_KEY=your-super-secret-jwt-key-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# 服务间通信密钥
SERVICE_SECRET_KEY=your-service-secret-key

# ================================
# CORS配置
# ================================
# 允许的源地址（逗号分隔）
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,http://127.0.0.1:3000
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# ================================
# 外部服务URL配置
# ================================
# 交易服务URL
TRADING_SERVICE_URL=http://localhost:8001

# 交易所服务URL
EXCHANGE_SERVICE_URL=http://localhost:8003

# 用户服务URL
USER_SERVICE_URL=http://localhost:8000

# 通知服务URL
NOTIFICATION_SERVICE_URL=http://localhost:8004

# ================================
# 订单业务配置
# ================================
# 订单超时时间（秒）
ORDER_TIMEOUT_SECONDS=300

# 每用户最大订单数
MAX_ORDERS_PER_USER=100

# 订单历史保留天数
ORDER_HISTORY_RETENTION_DAYS=90

# 最大订单金额
MAX_ORDER_AMOUNT=1000000

# 最小订单金额
MIN_ORDER_AMOUNT=1

# ================================
# Celery配置
# ================================
# Celery代理URL
CELERY_BROKER_URL=redis://localhost:6379/3

# Celery结果后端URL
CELERY_RESULT_BACKEND=redis://localhost:6379/3

# Celery任务超时时间
CELERY_TASK_TIMEOUT=300

# Celery工作进程数
CELERY_WORKER_CONCURRENCY=4

# ================================
# 日志配置
# ================================
# 日志级别 (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# 日志格式 (json, text)
LOG_FORMAT=json

# 日志文件路径
LOG_FILE_PATH=logs/order-service.log

# 日志文件最大大小（MB）
LOG_FILE_MAX_SIZE=10

# 日志文件备份数量
LOG_FILE_BACKUP_COUNT=5

# ================================
# 监控配置
# ================================
# 是否启用监控
MONITORING_ENABLED=true

# 监控端口
MONITORING_PORT=9002

# Prometheus指标路径
METRICS_PATH=/metrics

# 健康检查路径
HEALTH_CHECK_PATH=/health

# ================================
# 安全配置
# ================================
# 是否启用HTTPS
HTTPS_ENABLED=false

# SSL证书文件路径
SSL_CERT_FILE=

# SSL私钥文件路径
SSL_KEY_FILE=

# 是否启用速率限制
RATE_LIMIT_ENABLED=true

# 速率限制（每分钟请求数）
RATE_LIMIT_PER_MINUTE=100

# ================================
# 缓存配置
# ================================
# 缓存TTL（秒）
CACHE_TTL=300

# 订单缓存TTL（秒）
ORDER_CACHE_TTL=60

# 用户缓存TTL（秒）
USER_CACHE_TTL=300

# ================================
# 性能配置
# ================================
# 慢查询阈值（毫秒）
SLOW_QUERY_THRESHOLD=1000

# 慢请求阈值（毫秒）
SLOW_REQUEST_THRESHOLD=2000

# 数据库查询超时（秒）
DATABASE_QUERY_TIMEOUT=30

# HTTP请求超时（秒）
HTTP_REQUEST_TIMEOUT=30

# ================================
# 开发环境配置
# ================================
# 是否启用自动重载
AUTO_RELOAD=true

# 是否显示详细错误信息
SHOW_ERROR_DETAILS=true

# 是否启用API文档
ENABLE_DOCS=true

# API文档URL路径
DOCS_URL=/docs
REDOC_URL=/redoc

# ================================
# 测试环境配置
# ================================
# 测试数据库URL
TEST_DATABASE_URL=postgresql+asyncpg://cashup:cashup123@localhost:5432/cashup_orders_test

# 是否在测试中使用内存数据库
USE_IN_MEMORY_DB_FOR_TESTS=false

# ================================
# 生产环境配置
# ================================
# 工作进程数（生产环境）
WORKERS=4

# 每个工作进程的线程数
THREADS=2

# 工作进程类型
WORKER_CLASS=uvicorn.workers.UvicornWorker

# 最大请求数（重启工作进程）
MAX_REQUESTS=1000

# 最大请求数抖动
MAX_REQUESTS_JITTER=100

# 工作进程超时时间
WORKER_TIMEOUT=30

# 保持连接超时时间
KEEP_ALIVE_TIMEOUT=2

# ================================
# 备份和恢复配置
# ================================
# 是否启用自动备份
AUTO_BACKUP_ENABLED=false

# 备份间隔（小时）
BACKUP_INTERVAL_HOURS=24

# 备份保留天数
BACKUP_RETENTION_DAYS=30

# 备份存储路径
BACKUP_STORAGE_PATH=/backups

# ================================
# 第三方服务配置
# ================================
# 邮件服务配置
SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_USE_TLS=true

# 短信服务配置
SMS_API_KEY=
SMS_API_SECRET=

# 推送通知配置
PUSH_NOTIFICATION_KEY=